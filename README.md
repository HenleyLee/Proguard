# Proguard-master —— Android 代码混淆规则

## Proguard介绍 ##
Android SDK自带了混淆工具Proguard。它位于SDK根目录\tools\proguard下面。
ProGuard是一个免费的Java类文件收缩，优化，混淆和预校验器。它可以检测并删除未使用的类，字段，方法和属性。它可以优化字节码，并删除未使用的指令。它可以将类、字段和方法使用短无意义的名称进行重命名。最后，预校验的Java6或针对Java MicroEdition的所述处理后的码。
如果开启了混淆，Proguard默认情况下会对所有代码，包括第三方包都进行混淆，可是有些代码或者第三方包是不能混淆的，这就需要我们手动编写混淆规则来保持不能被混淆的部分。

## Proguard作用 ##
**压缩**（Shrinking）：默认开启，用以减小应用体积，移除未被使用的类和成员，并且会在优化动作执行之后再次执行（因为优化后可能会再次暴露一些未被使用的类和成员）。
```
    -dontshrink 关闭压缩
```
**优化**（Optimization）：默认开启，在字节码级别执行优化，让应用运行的更快。
```
    -dontoptimize  关闭优化
    -optimizationpasses n 表示proguard对代码进行迭代优化的次数，Android一般为5
```
**混淆**（Obfuscation）：默认开启，增大反编译难度，类、函数、变量名会被随机命名成无意义的代号形如：a,b,c...之类的，除非用keep保护。
```
    -dontobfuscate 关闭混淆
```
上面这几个功能都是默认打开的，要关闭他们只需配置对应的规则即可。
混淆后默认会在工程目录app/build/outputs/mapping/release下生成一个mapping.txt文件，这就是混淆规则，我们可以根据这个文件把混淆后的代码反推回源本的代码，所以这个文件很重要，注意保护好。原则上，代码混淆后越乱越无规律越好，但有些地方我们是要避免混淆的，否则程序运行就会出错。













